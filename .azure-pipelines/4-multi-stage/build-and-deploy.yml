trigger:
- master
  
pr: none

stages:
- stage: build_app
  jobs:
  - template: templates/build-dotnet-app.yml
    parameters:
      solutionRootPath: 'dotnet/aspnetcore31/webappWithTests/Application'
      appName: 'webappWithTests'
      
- stage: deploy_test
  dependsOn: build_app
  jobs:
  - template: templates/deploy-app.yml
    parameters:
      environment: test

- stage: deploy_prod
  dependsOn: build_app
  jobs:
  - template: templates/deploy-app.yml
    parameters:
      environment: prod
